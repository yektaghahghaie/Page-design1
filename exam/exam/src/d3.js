
var json = {
  "data": {
    "heatmap": [
      { "start_time": 0.0, "end_time": 1.3, "value": 1.0 },
      { "start_time": 1.3, "end_time": 2.6, "value": 0.734676075394982 },
      { "start_time": 2.6, "end_time": 3.9, "value": 0.7557465922747924 },
      { "start_time": 3.9, "end_time": 5.2, "value": 0.7593374524705795 },
      { "start_time": 5.2, "end_time": 6.5, "value": 0.85243180286731 },
      { "start_time": 6.5, "end_time": 7.8, "value": 0.8661897786664888 },
      { "start_time": 7.8, "end_time": 9.1, "value": 0.8647320783902167 },
      { "start_time": 9.1, "end_time": 10.4, "value": 0.8477788352139553 },
      { "start_time": 10.4, "end_time": 11.7, "value": 0.8740685385243728 },
      { "start_time": 11.7, "end_time": 13.0, "value": 0.8476186078229989 },
      { "start_time": 13.0, "end_time": 14.3, "value": 0.8008561375504631 },
      { "start_time": 14.3, "end_time": 15.6, "value": 0.7606197188484493 },
      { "start_time": 15.6, "end_time": 16.9, "value": 0.7618668760841275 },
      { "start_time": 16.9, "end_time": 18.2, "value": 0.7179179451267588 },
      { "start_time": 18.2, "end_time": 19.5, "value": 0.6399940985333603 },
      { "start_time": 19.5, "end_time": 20.8, "value": 0.5924753281404974 },
      { "start_time": 20.8, "end_time": 22.1, "value": 0.5825255761435392 },
      { "start_time": 22.1, "end_time": 23.4, "value": 0.5508411406915573 },
      { "start_time": 23.4, "end_time": 24.7, "value": 0.5234285038937884 },
      { "start_time": 24.7, "end_time": 26.0, "value": 0.5057065494036226 },
      { "start_time": 26.0, "end_time": 27.3, "value": 0.5481677025074916 },
      { "start_time": 27.3, "end_time": 28.6, "value": 0.5493767316620003 },
      { "start_time": 28.6, "end_time": 29.9, "value": 0.5430622294450648 },
      { "start_time": 29.9, "end_time": 31.2, "value": 0.5544309945743516 },
      { "start_time": 31.2, "end_time": 32.5, "value": 0.6226773527416075 },
      { "start_time": 32.5, "end_time": 33.8, "value": 0.6318658848658297 },
      { "start_time": 33.8, "end_time": 35.1, "value": 0.6249265740929528 },
      { "start_time": 35.1, "end_time": 36.4, "value": 0.6186022323711994 },
      { "start_time": 36.4, "end_time": 37.7, "value": 0.6581023654001864 },
      { "start_time": 37.7, "end_time": 39.0, "value": 0.6575492286918395 },
      { "start_time": 39.0, "end_time": 40.3, "value": 0.6453755249809094 },
      { "start_time": 40.3, "end_time": 41.6, "value": 0.6315226203227481 },
      { "start_time": 41.6, "end_time": 42.9, "value": 0.6369271919691304 },
      { "start_time": 42.9, "end_time": 44.2, "value": 0.6211261771695646 },
      { "start_time": 44.2, "end_time": 45.5, "value": 0.5908385041515163 },
      { "start_time": 45.5, "end_time": 46.8, "value": 0.5717253778551545 },
      { "start_time": 46.8, "end_time": 48.1, "value": 0.5834181757681062 },
      { "start_time": 48.1, "end_time": 49.4, "value": 0.5773847703138114 },
      { "start_time": 49.4, "end_time": 50.7, "value": 0.5258567371452879 },
      { "start_time": 50.7, "end_time": 52.0, "value": 0.49769037191595117 },
      { "start_time": 52.0, "end_time": 53.3, "value": 0.4882632317998931 },
      { "start_time": 53.3, "end_time": 54.6, "value": 0.5509502697449931 },
      { "start_time": 54.6, "end_time": 55.9, "value": 0.5522061483599419 },
      { "start_time": 55.9, "end_time": 57.2, "value": 0.5542655119933221 },
      { "start_time": 57.2, "end_time": 58.5, "value": 0.5461112460005348 },
      { "start_time": 58.5, "end_time": 59.8, "value": 0.5775922944154269 },
      { "start_time": 59.8, "end_time": 61.1, "value": 0.5687092341907809 },
      { "start_time": 61.1, "end_time": 62.4, "value": 0.5657051662823204 },
      { "start_time": 62.4, "end_time": 63.7, "value": 0.558229937934528 },
      { "start_time": 63.7, "end_time": 65.0, "value": 0.5741541701694279 },
      { "start_time": 65.0, "end_time": 66.3, "value": 0.5346304446913887 },
      { "start_time": 66.3, "end_time": 67.6, "value": 0.4779248193626248 },
      { "start_time": 67.6, "end_time": 68.9, "value": 0.43573805426811163 },
      { "start_time": 68.9, "end_time": 70.2, "value": 0.4631415224363911 },
      { "start_time": 70.2, "end_time": 71.5, "value": 0.4623752709986913 },
      { "start_time": 71.5, "end_time": 72.8, "value": 0.4624138463300799 },
      { "start_time": 72.8, "end_time": 74.1, "value": 0.46646884044063314 },
      { "start_time": 74.1, "end_time": 75.4, "value": 0.5530368038291775 },
      { "start_time": 75.4, "end_time": 76.7, "value": 0.564828332227973 },
      { "start_time": 76.7, "end_time": 78.0, "value": 0.5659944253614578 },
      { "start_time": 78.0, "end_time": 79.3, "value": 0.5858559130867594 },
      { "start_time": 79.3, "end_time": 80.6, "value": 0.683655335787358 },
      { "start_time": 80.6, "end_time": 81.9, "value": 0.7191498958549912 },
      { "start_time": 81.9, "end_time": 83.2, "value": 0.711657671998877 },
      { "start_time": 83.2, "end_time": 84.5, "value": 0.7063768768506026 },
      { "start_time": 84.5, "end_time": 85.8, "value": 0.7627371131977446 },
      { "start_time": 85.8, "end_time": 87.1, "value": 0.7448894813960402 },
      { "start_time": 87.1, "end_time": 88.4, "value": 0.7010793098191158 },
      { "start_time": 88.4, "end_time": 89.7, "value": 0.6840238699678131 },
      { "start_time": 89.7, "end_time": 91.0, "value": 0.7261485790944402 },
      { "start_time": 91.0, "end_time": 92.3, "value": 0.7368464688952288 },
      { "start_time": 92.3, "end_time": 93.6, "value": 0.7304046121784333 },
      { "start_time": 93.6, "end_time": 94.9, "value": 0.707799579797238 },
      { "start_time": 94.9, "end_time": 96.2, "value": 0.7370233563568428 },
      { "start_time": 96.2, "end_time": 97.5, "value": 0.7472540933038871 },
      { "start_time": 97.5, "end_time": 98.8, "value": 0.7215109297610862 },
      { "start_time": 98.8, "end_time": 100.1, "value": 0.6876419006144044 },
      { "start_time": 100.1, "end_time": 101.4, "value": 0.6544033824639562 },
      { "start_time": 101.4, "end_time": 102.7, "value": 0.6747538264911783 },
      { "start_time": 102.7, "end_time": 104.0, "value": 0.6446598128179565 },
      { "start_time": 104.0, "end_time": 105.3, "value": 0.5910972384032072 },
      { "start_time": 105.3, "end_time": 106.6, "value": 0.5455412255964207 },
      { "start_time": 106.6, "end_time": 107.9, "value": 0.5456529263386157 },
      { "start_time": 107.9, "end_time": 109.2, "value": 0.5293637379250128 },
      { "start_time": 109.2, "end_time": 110.5, "value": 0.5033319861784029 },
      { "start_time": 110.5, "end_time": 111.8, "value": 0.48418945318014195 },
      { "start_time": 111.8, "end_time": 113.1, "value": 0.47732729307004235 },
      { "start_time": 113.1, "end_time": 114.4, "value": 0.4247758395878947 },
      { "start_time": 114.4, "end_time": 115.7, "value": 0.35432241340243426 },
      { "start_time": 115.7, "end_time": 117.0, "value": 0.2989974494997199 },
      { "start_time": 117.0, "end_time": 118.3, "value": 0.26868473046940755 },
      { "start_time": 118.3, "end_time": 119.6, "value": 0.24057818495686187 },
      { "start_time": 119.6, "end_time": 120.9, "value": 0.21596947159455157 },
      { "start_time": 120.9, "end_time": 122.2, "value": 0.1915443544471403 },
      { "start_time": 122.2, "end_time": 123.5, "value": 0.17292980033240754 },
      { "start_time": 123.5, "end_time": 124.8, "value": 0.15739053872351097 },
      { "start_time": 124.8, "end_time": 126.1, "value": 0.13905182618134576 },
      { "start_time": 126.1, "end_time": 127.4, "value": 0.10623674217573478 },
      { "start_time": 127.4, "end_time": 128.7, "value": 0.06922488574014796 },
      { "start_time": 128.7, "end_time": 130.0, "value": 0.0 }
    ]
  }
};
const marginTop = 20;
const marginRight = 20;
const marginBottom = 20;
const marginLeft = 40;
const width = 1940 - marginLeft - marginRight; 
const height = 400 - marginTop - marginBottom; 

var svg = d3.select("body").append("svg")
  .attr("width", width + marginLeft + marginRight)
  .attr("height", height + marginTop + marginBottom)
  .append("g")
  .attr("transform", `translate(${marginLeft},${marginTop})`); 

var x = d3.scaleBand()
  .domain(json.data.heatmap.map(function (d) { return d.end_time; }))
  .range([0, width]) 
  .padding(0.1);

var y = d3.scaleLinear()
  .domain([0, d3.max(json.data.heatmap, function (d) { return d.value * 100; })])
  .range([height, 0]); 

svg.append("g")
  .attr("transform", `translate(0,${height})`) 
  .call(d3.axisBottom(x));

svg.append("g")
  .call(d3.axisLeft(y));

svg.selectAll(".bar")
  .data(json.data.heatmap)
  .enter().append("rect")
  .attr("class", "bar")
  .attr("x", function (d) { return x(d.end_time); })
  .attr("y", function (d) { return y(d.value * 100); })
  .attr("width", x.bandwidth())
  .attr("height", function (d) { return height - y(d.value * 100); })
  .style("fill", "#10a778");

